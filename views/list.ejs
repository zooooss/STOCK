<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>List - Stock</title>
        <link href="/main.css" rel="stylesheet" />
    </head>
    <body class="white-bg">
<div class="container">
<%- include('nav.ejs')%>

        <div class="white-bg">
            <%for(let i=0;i<customer.length;i++){%>
            <div class="list-box">
                <h4>
                    <a href="/detail/<%= customer[i]._id %>">
                    <%= customer[i].R_name %>
                </a>
            <a href="/edit/<%= customer[i]._id %>">
                âœï¸
            </a>
            <span class="delete" data-id="<%= customer[i]._id %>">ğŸ—‘ï¸</span>
            </h4>
                <p><%=customer[i].ph %></p>
            </div>
            <%}%>
        </div>
        </div>
        <script>
    for(let i = 0; i < '<%= customer.length %>'; i++){
document.querySelectorAll('.delete')[i].addEventListener('click',function(e){
fetch('/delete?docid='+e.target.dataset.id,{
    method : 'DELETE',
})                    .then(data => {
                        console.log('ì„œë²„ ì‘ë‹µ:', data);
                        alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
location.reload();
                    }).then((r)=>r.text).then((r)=>{
                        e.target.parentElement.parentElement.style.display = 'none'
                    }) //ì„œë²„ì—ì„œ ë³´ë‚´ëŠ”ê²Œ ë¬¸ìì¼ê²½ìš° textì‚¬ìš©, object/arrayì¼ ê²½ìš° jsonì‚¬ìš©
//ë¸Œë¼ìš°ì €ì½˜ì†”ì°½ì— ì¶œë ¥ë˜ëŠ”ê±°ì„ !! ì„œë²„ì—ì„œ ë³´ë‚¸ ë©”ì„¸ì§€ or ë°ì´í„°
})
}
        </script>
        <%- include('navbar-bottom.ejs')%>
    </body>
</html>
